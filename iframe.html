<html>
	<head>
<script>
window.addEventListener("DOMContentLoaded", async function(event) {
    console.log("Hello Parent");

        if (window.ethereum) {
            //do nothing
	} else if (typeof window.web3 !== 'undefined') {
            window.ethereum = window.web3;
        } else if (typeof window.TPJSBrigeClient !== 'undefined') {
            window.ethereum = window.TPJSBrigeClient;
        } else if (typeof window.imToken !== 'undefined') {
            window.ethereum = window.imToken;
        }
	
    window.accounts = await window.ethereum.request({method: 'eth_requestAccounts'});
    console.log(window.accounts);
    window.parent.postMessage(window.accounts[0] + "Hello Parent", "*");
});

window.addEventListener('message', async function(event) {
    if(event.origin != "https://hotterpotter.github.io") {
        return; //ignore self-generated messages
    }
    var t = window.accounts[0] + " received from the parent: " + event.data + " | " + event.origin + "<br>";
    document.getElementById("myDiv").innerHTML += t;
});
</script>
	</head>
	<body>
		I'm iframe.
		<div id="myDiv">
		</div>
	</body>
</html>
